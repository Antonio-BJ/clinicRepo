<button class="btn btn-warning" ng-click="historiaRapida2(folio)" style="margin: 10px; position: fixed; top: 0; right: 300px; z-index: 1000;">Historia Clínica Rápida</button>

<button class="btn btn-info" ng-click="contactoAMI()" style="margin: 10px; position: fixed; top: 0; right: 500px; z-index: 1000;">Contacto AMI</button>

<div ng-hide="verDocsReque">
  <div class="row semiTitulo" >
      <label >Diagnóstico</label>    
  </div> 
     
  <div class="bordeSemititulo">     
        
    <style type="text/css">
      .demoFocus {   
        background-color: yellow;
      }
      .ir-arriba {
        display:none;
        padding:20px;
        background:#024959;
        font-size:20px;
        color:#fff;
        cursor:pointer;
        position: fixed;
        bottom:20px;
        right:20px;
      }
    </style>
    
    <form  ng-submit="guardarDatosDiagnostico()" ng-class="spinner">    
      <div class="row"> 
        <div class="col-md-12">
        </div> 
      </div>
      <div class="row">     
        <div class="col-md-12">         
          <div class="input-group" style="width:100%">
            <div class="row cajaInputArriba">
              <div>
                <div class="col-md-6"><span>Diagnóstico a este momento:</span></div>    
                <div class="col-md-6" align="right"><span><b>{{conteoDiag}}</b></span></div>    
              </div>
            </div>
            <textarea ng-class="{ demoFocus: focus}" ng-change="validarCampo(diag.diagnostico,1)"  ng-model="diag.diagnostico" ng-keypress="validarLongitud()" rows="4" id="obs" name="diagnostico" style="resize:none; width:100%" mayusculas maxlength="225" minlength="1" required></textarea>
          </div>
          
          <div class="validacion" ng-show="msjPalabraProhi">
            <div >Está utilzando una palabra prohibida <b>(POLICONTUNDIDO, POLITRAUMATIZADO, POSIBLE)</b></div>            
          </div>
          <div class="validacion" ng-show="validaDiagostico">
            <span>Campo requerido</span>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-12"> 
          <div class="input-group" style="width:100%">
            <div class="cajaInputArriba">
              <span>Observaciones:</span>
            </div>           
            <textarea class="form-control" ng-model="diag.obs" rows="4" id="obs" name="obs" style="resize:none; width:100%" mayusculas></textarea>
          </div>
        </div>
      </div> 
      
      <div class="row" >
        <div class="col-md-12">
          <div class="cajaInputcompleto">Pronostico</div>
          <br>
          <div></div>
          <div class="col-md-6"> 
            <div class="container" style="width:100%"  >
              <div class="input-group" style="width:100%">                      
                <span class="input-group-addon">Pronóstico: </span>
                <select class="form-control" ng-model="opcionPronostico" style="width:100%;" id="opPron" ng-change="agregarPronostico(opcionPronostico)">
                  <option value="" > - Seleccione - </option>
                  <option value="1" > Bueno para la vida y bueno para la función </option>
                  <option value="2" > Bueno para la vida y malo para la función </option>
                  <option value="3" > Malo para la vida y bueno para la función </option>
                  <option value="4" > Malo para la vida y malo para la función </option>
                  <option value="5" > Reservado a evolución </option>
                </select>
              </div>             
            </div> 
          </div>
          <div class="col-md-6">
            <div class="container" style="width:100%"  >
              <div class="panel panel-default" style="width:100%">                
                <textarea rows="3" class="form-control" name="pronostico" ng-model="diag.pronostico" ng-change="validarCampo(diag.pronostico,2)" id="pronostico" onpaste="return false" style="resize:none; border: none;"  mayusculas required></textarea>
              </div> 
              <div class="validacion" ng-show="validaPronostico">
                <span>Campo requerido</span>
              </div>         
            </div>             
          </div> 
        </div> 
      </div>

      <div class="row">
        <div class="col-md-2">
          <div class="checkbox c-checkbox">
            <label>
              <input ng-model="diag.ambulancia" type="checkbox" value="1">
            <span class="fa fa-check"></span>Requiere ambulancia</label>
         </div>	
        </div>
        <div class="col-md-2">
          <div class="checkbox c-checkbox">
            <label>
              <input ng-model="diag.hospital" type="checkbox" value="1">
            <span class="fa fa-check"></span>Requiere hospitalización</label>
          </div>	
        </div>
      </div>

      <div class="row" align="right"> 
        <div class="col-md-12">
          <button type="submit" class="btn btn-primary">Guardar</button>
        </div>
      </div>
    </form>
  </div>
</div>

<div ng-hide="verResultado">
  <div ng-show="verDocsReque">
    <div class="row">
      <div class="col-md-12">
        <div class="panel panel-default">                         
          <!-- START list group-->
          <div class="list-group">
            <!-- START list group item-->

            <!--<div class="list-group-item">
              <div class="media">
                <div class="pull-left">
                <span class="fa-stack fa-lg">
                  <em class="fa fa-circle fa-stack-2x text-warning"></em>
                  <em class="fa fa-envelope-o fa-stack-1x fa-inverse text-white"></em>
                </span>
                </div>
                <div class="media-body clearfix">
                <div class="media-heading text-warning m0">Indicaciones del Kit</div>
                <small class="text-muted pull-right"></small>
                <p class="m0">
                  <br>
                  <div class="col-sm-12">												
                    <label class="radio-inline c-radio">
                      <input  id="msj1" ng-model="diagnostico.kit" ng-change="validarCampo(diagnostico.kit,3)"  type="radio" name="i-radio1" value="1">
                      <span class="fa fa-check"></span>SI</label>
                    <label class="radio-inline c-radio">
                      <input  id="msj2" ng-model="diagnostico.kit" ng-change="validarCampo(diagnostico.kit,3)" type="radio" name="i-radio1" value="0">
                      <span class="fa fa-times"></span>NO</label>
                  </div>
                      <div class="col-md-12" ng-show="diagnostico.kit==1">
                        <div class="form-group">
                          <label for="obsIndKit">Observaciones a las indicaciones del Kit</label>
                          <textarea class="form-control" ng-model="diagnostico.obsKit" name="obsIndKit" id="obsIndKit" cols="10" rows="3"></textarea>
                          <small id="emailHelp" class="form-text text-muted">Recuerda que el paciente es alérgico a: <span style="color: red;"> {{alergias}} </span></small>
                        </div>
                  
                      </div>
                      
                    </p>
                    <br>
                    <div class="validacion" ng-show="validaKit">
                      <span>Campo requerido</span>
                    </div>   
                    </div>
                  </div>
            </div>-->
              
            <!-- END list group item-->
            <!-- START list group item
            <div class="list-group-item">
              <div class="media">
                <div class="pull-left">
                  <span class="fa-stack fa-lg">
                    <em class="fa fa-circle fa-stack-2x text-warning"></em>
                    <em class="fa fa-envelope-o fa-stack-1x fa-inverse text-white"></em>
                  </span>
                </div>
                <div class="media-body clearfix">
                  <div class="media-heading text-warning m0">¿El paciente toma algún medicamento o suplemento alimenticio?</div>
                  <small class="text-muted pull-right"></small>
                  <p class="m0">
                    <br>
                    <div class="col-sm-12">                       
                      <input class="form-control" type="text" name="medicamento" minlength="6" placeholder="Ej. ASPIRINA">
                    </div>
                  </p>
                </div> 
              </div>
            </div>-->

            <div class="list-group-item">
              <div class="media">
                <div class="pull-left">
                  <span class="fa-stack fa-lg">
                    <em class="fa fa-circle fa-stack-2x text-warning"></em>
                    <em class="fa fa-envelope-o fa-stack-1x fa-inverse text-white"></em>
                  </span>
                </div>
                <div class="media-body clearfix">
                  <div class="media-heading text-warning m0">¿Desea entregar receta al paciente?</div>
                  <small class="text-muted pull-right"></small>
                  <p class="m0">
                    <br>
                    <div class="col-sm-12">												
                      <label class="radio-inline c-radio">
                      <input  id="msj1" ng-model="diagnostico.receta" ng-change="validaSinReceta(); validarCampo(diagnostico.receta,4)"  type="radio" name="i-radio3" value="1">
                      <span class="fa fa-check"></span>SI</label>
                      <label class="radio-inline c-radio">
                      <input  id="msj2" ng-model="diagnostico.receta"  ng-change="validaSinReceta(); validarCampo(diagnostico.receta,4)"  type="radio" name="i-radio3" value="0">
                      <span class="fa fa-times"></span>NO</label>
                    </div>
                    <br>
                    <div ng-show="diagnostico.receta==1" class="col-sm-12">	
                      <br>
                      <button class="btn btn-default" ng-click="irRecetaMovilExterna(folio)">En farmacia</button>
                    </div>
                  </p>

                  <div class="validacion" ng-show="validaReceta">
                    <span>Campo requerido</span>
                  </div>
                </div>

                <div class="validacion" ng-show="msjRecetaCreada">
                  <span>La receta se guardó correctamente</span>
                </div> 
              </div>
            </div>

            <div class="list-group-item">
              <div class="media">
                <div class="pull-left">
                  <span class="fa-stack fa-lg">
                    <em class="fa fa-circle fa-stack-2x text-warning"></em>
                    <em class="fa fa-envelope-o fa-stack-1x fa-inverse text-white"></em>
                  </span>
                </div>
                <div class="media-body clearfix">
                  <div class="media-heading text-warning m0">Número de cuenta del px</div>
                  <small class="text-muted pull-right"></small>
                  <p class="m0">
                    <br>
                    <div class="col-sm-12">                       
                      <button class="btn btn-default" ng-click="irCuentaPx(folio)">Llenar datos</button>
                      <!--<button class="btn btn-default" ng-click="">Instrucciones de reemboloso</button>-->
                    </div>
                  </p>
                </div> 
              </div>
            </div>
                                    
            <!-- END list group item-->
            <!-- START list group item-->
            <div class="list-group-item">
              <div class="media">
                <div class="pull-left">
                  <span class="fa-stack fa-lg">
                    <em class="fa fa-circle fa-stack-2x text-warning"></em>
                    <em class="fa fa-envelope-o fa-stack-1x fa-inverse text-white"></em>
                  </span>
                </div>
                <div class="media-body clearfix">
                  <div class="media-heading text-warning m0">¿Desea entregar hoja de indicaciones al paciente?</div>
                  <small class="text-muted pull-right"></small>
                  <p class="m0">
                    <br>
                    <div class="col-sm-2">												
                      <label class="radio-inline c-radio">
                        <input  id="msj1" ng-model="diagnostico.indicaciones" ng-change="validarCampo(diagnostico.indicaciones,5)"  type="radio" name="i-radio4" value="1">
                        <span class="fa fa-check"></span>SI</label>
                      <label class="radio-inline c-radio">
                        <input  id="msj2" ng-model="diagnostico.indicaciones" ng-change="validarCampo(diagnostico.indicaciones,5)" type="radio" name="i-radio4" value="0">
                        <span class="fa fa-times"></span>NO</label>
                    </div>
                  </p>
                
                  <br>
                  <div class="validacion" ng-show="validaHojaIndicaciones">
                    <span>Campo requerido</span>
                  </div> 
                  <div class="row" ng-show="diagnostico.indicaciones==1">
                    <div class="col-md-12">
                      <div class="panel panel-default" ng-show="diagnostico.indicaciones==1">
                        <div class="panel-heading"><span class="">Indicaciones Generales: </span></div>
                        <div class="panel-body">
                          <form name="formularios.indica" ng-submit="guardaIndicaciones()" >
                            <div class="row">
                              <div class="col-md-6 spinnerModal">                       
                                <select class="form-control" ng-model="indicacion.indicacion" style="width:100%;" name="tipoSumin" id="tipoSumin" ng-options="indicacion.Ind_nombre as indicacion.Ind_nombre for indicacion in listaIndicacion" ng-change="verIndicacionCam()">
                                  <option value="" > - Seleccione - </option>             
                                </select>
                                <div >            
                                  <textarea class="form-control" ng-model="indicacion.obs" rows="3" id="obs" name="obs" style="resize:none; width: 100%;" required></textarea>
                                </div>
                                <div class="validacion" ng-show="msjPalabraProhiInd">
                                  <div >Está utilzando una palabra prohibida <b>(INCAPACIDAD)</b></div>            
                                </div>  
                              </div>
                              <div class="col-md-6">     
                                <input type="submit" class="btn btn-default btn-block" value="Guardar">   
                              </div>
                              <div ng-show="spinnerModal" class="row align-center" align="center">
                                <div class="col-md-12 align-center">
                                  <br>
                                    <span ng-class="spinnerModal"></span>
                                </div>
                              </div>
                            </div>
                          </form>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="row" ng-show="listaIndicAgreg.length>0 && diagnostico.indicaciones==1">
                    <div class="col-md-12">
                      <table id="TablaAlergias" class="table table-striped table-bordered table-hover">
                        <tr>
                          <th>#</th>
                          <th>Indicaciones</th>
                          <th>Eliminar</th>
                        </tr>
                        <tr ng-repeat="indic in listaIndicAgreg"> 
                          <td style="width:5%">{{$index + 1}}</td>              
                          <td>{{indic.Nind_obs}}</td>
                          <td style="width:10%"><input type='button' class="btn btn-danger btn-xs" ng-click='eliminarIndicacion(indic.Nind_clave)' value='Eliminar'></td>
                        </tr>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
                                    
            <!-- END list group item-->
            <!-- START list group item-->
            <div class="list-group-item">
              <div class="media">
                <div class="pull-left">
                  <span class="fa-stack fa-lg">
                    <em class="fa fa-circle fa-stack-2x text-warning"></em>
                    <em class="fa fa-envelope-o fa-stack-1x fa-inverse text-white"></em>
                  </span>
                </div>
                <div class="media-body clearfix">
                  <div class="media-heading text-warning m0">Generar Pase</div>
                  <small class="text-muted pull-right"></small>
                  <p class="m0">
                    <br>
                    <div class="col-sm-12">												
                      <label class="radio-inline c-radio">
                        <input  id="msj1" ng-model="diagnostico.pase" ng-click="verPase()" ng-change="validarCampo(diagnostico.pase,6)"  type="radio" name="i-radio7" value="1">
                        <span class="fa fa-check"></span>SI</label>
                      <label class="radio-inline c-radio">
                        <input  id="msj2" ng-model="diagnostico.pase" ng-click="verPase()" ng-change="validarCampo(diagnostico.pase,6)" type="radio" name="i-radio7" value="0">
                        <span class="fa fa-times"></span>NO</label>
                    </div>
                  </p>
                  <br>
      
                  <div class="validacion" ng-show="validaPase">
                    <span>Campo requerido</span>
                  </div>
                  <div class="validacion" ng-show="msjPaseCreado">
                    <span>El Pase se guardó correctamente</span>
                  </div> 
                </div>
              </div>
            </div>
            <!-- END list group item-->
             <!-- START list group item-->
							 
            <div class="list-group-item">
              <div class="media">
                <div class="pull-left">
                  <span class="fa-stack fa-lg">
                    <em class="fa fa-circle fa-stack-2x text-warning"></em>
                    <em class="fa fa-envelope-o fa-stack-1x fa-inverse text-white"></em>
                  </span>
                </div>
                <div class="media-body clearfix">
                  <div class="media-heading text-warning m0">Ejercicios en casa:</div>
                  <small class="text-muted pull-right"></small>
                  <p class="m0">
                    <br>
                    <div class="col-sm-3" ng-repeat="ejercicio in ejercicios">	
                      <div class="checkbox c-checkbox">
                        <label>
                          <input ng-model="ejercicio.variable" ng-click="quitarNinguno(ejercicio.variable)" type="checkbox" value="1">
                          <span class="fa fa-check"></span><a href="{{ejercicio.ubicacion}}" target="_blank">{{ejercicio.nombre}}</a></label>
                      </div>									
                    </div>
                  </p>
                  <!-- <div class="col-sm-3" >	
                    <div class="checkbox c-checkbox">
                        <label>
                           <input type="checkbox" id="ninguno" name="ninguno" ng-model="total.check"  ng-change="blancos()"  value="1">
                           <span class="fa fa-check"></span>Ninguno</label>
                     </div>									
                  </div>                                           -->
                </div>
              </div>
            </div>
          </div>
          <!-- END list group-->
        </div>
        <!-- END list group item-->
      </div> 
    </div>
    <div class="row" ng-show="cargador1"> 
      <div class="col-md-12">
        <div  align="center">
          <img ng-src="imgs/cargador.gif">
        </div>
      </div>
    </div>    
  
    <div class="row">
      <div class="col-md-12" align="right">
        <input type="button" ng-click="guardaDiagnostico()" class="btn btn-primary btn-lg" value="Generar Documentos">
      </div>
    </div>      
  </div>

  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Generar Pase</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div ng-class="cargardoModal">
          <form name="enviaPase" id="enviaPase" ng-submit="enviaDatos()">
            <div class="row" >
              <div class="col-md-4" >
                <h3 class="mt0">Datos del paciente</h3>
                <div class="media-body">
                  <div class="media-heading">											
                    <ul class="list-unstyled">
                      <li class="mb-sm">
                      <em class="fa fa-user fa-fw"></em>{{detalle.nombre}}</li>												   
                      <li class="mb-sm">
                      <em class="fa fa-phone fa-fw"></em>{{detalle.telefono}}</li>
                      <li class="mb-sm">
                      <em class="fa fa-envelope fa-fw"></em>{{detalle.mail}}</li>
                      <li class="mb-sm" ng-show="detalle.sexo=='FEMENINO'">
                      <em class="fa fa-female  fa-fw"></em>{{detalle.sexo}}</li>
                      <li class="mb-sm" ng-show="detalle.sexo=='MASCULINO'">
                      <em class="fa fa-male  fa-fw"></em>{{detalle.sexo}}</li>
                      <li class="mb-sm">
                      <em class="fa fa-clock-o fa-fw"></em>{{detalle.edad}} años</li>
                    </ul>
                  </div>
                </div>
              </div>

              <div class="col-md-8">
                <h3 class="mt0">Datos de atención</h3>
                <div class="media-body">
                  <div class="col-md-12">
                    <h4>Motivo de generación de pase</h4>
                  </div>													
                  <div class="col-sm-6">												
                    <label class="radio-inline c-radio">
                    <input id="inlineradio10"  ng-model="pase.motivo" type="radio" name="i-radio" value="1">
                    <span class="fa fa-check"></span>Solo Consulta</label>
                  </div>
                  <div class="col-sm-6">
                    <label class="radio-inline c-radio">
                    <input id="inlineradio10" type="radio"  ng-model="pase.motivo" name="i-radio" value="4">
                    <span class="fa fa-check"></span>Rx</label>
                  </div>
                  <div class="col-sm-6">
                    <label class="radio-inline c-radio">
                    <input id="inlineradio20" type="radio"  ng-model="pase.motivo" name="i-radio" value="5" >
                    <span class="fa fa-check"></span>Órtesis</label>
                  </div>
                  <div class="col-sm-6">
                    <label class="radio-inline c-radio">
                    <input id="inlineradio20" type="radio"  ng-model="pase.motivo" name="i-radio" value="6" >
                    <span class="fa fa-check"></span>Subsecuencia</label>
                  </div>
                  <div class="col-sm-6">
                    <label class="radio-inline c-radio">
                    <input id="inlineradio30" type="radio" name="i-radio"  ng-model="pase.motivo" value="3">
                    <span class="fa fa-check"></span>Consulta y Rehabilitación</label>   
                  </div>
                  <div class="col-sm-6">
                    <label class="radio-inline c-radio">
                    <input id="inlineradio20" type="radio" name="i-radio"  ng-model="pase.motivo" value="2">
                    <span class="fa fa-check"></span>Solo Rehabilitación</label>
                  </div>                   
                </div>				
              </div>
            </div>

            <div class="col-md-12">
              <h4>Diagnóstico</h4>
              <div class="form-group">																
                <h3><b style="color: darkorange;">{{detalle.diagnostico}}</b></h3>
              </div>
            </div>	
            <div class="row">
              <div class="col-md-12">
                <h3 class="mt0">Direccionamiento</h3>
                <div class="form-group">
                  <label class="col-sm-6">UNIDADES</label>
                  <div class="col-sm-12">
                    <select class="form-control"  ng-model="pase.unidad" >
                      <option value="">-Selecciona-</option>
                      <optgroup label="CDMX (Valle de México)">
                        <option value="1">MV Roma</option>
                        <option value="2">MV Satélite</option>
                        <option value="3">MV Cuicuilco</option>
                      </optgroup>
                      <optgroup label="Interior de la República">
                        <option value="86">MV Chihuahua</option>
                        <option value="6">NV Mérida</option>
                        <option value="5">MV Monterrey</option>
                        <option value="4">MV Puebla</option>
                        <option value="7">MV San Luis</option>
                        <option value="186">MV Veracruz</option>
                      </optgroup>
                      <optgroup label="Cualquier Unidad">
                        <option value="100">Cualquier</option>											
                      </optgroup>																			
                    </select>
                  </div>
                </div>									  
              </div>
            </div>			
          </form>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
          <button type="submit" form="enviaPase"  class="btn btn-primary">Generar Pase</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal fade" id="modalRecetaExterna" role="dialog">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Receta en farmacia</h4>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="col-md-12">
              <div>
                <!-- PESTAÑA RECETA EXTERNA -->
                <div role="tabpanel" class="tab-pane" id="recetaExterna">
                  <br>
                  <div class="alert alert-warning" role="alert" style="font-size: 1.1em; width: 80%; margin:auto;" align="center">
                    <i class="fa fa-info-circle" aria-hidden="true"></i>
                    Esta receta es para que el paciente adquiera medicamentos fuera de Médica Vial.
                    <br>
                    <b>Agregue los items manualmente.</b>
                  </div>
          
                  <br><br>
          
                  <form name="formularios.recetaExterna" ng-submit="guargaItemExterno()" novalidate> 
                    <div>         
                      <div class="row" >
                        <div class="col-md-4" style="height:100%,width:100%">
                          <div class="input-group" style="width:100%">
                            <div>
                              <div class="cajaInputArriba"> 
                                <span>Cuadro básico</span>
                              </div>
                              <select id="nombre" name="nombre" size="13" class="form-control" ng-model="cuadro.insumo" ng-options="insumo.Insumo_clave as insumo.Insumo_nombre for insumo in listInsumos" ng-change="agregaInsumo(cuadro.insumo)" required mayusculas>
                                  <option value=""> *Selecciona</option>
                              </select>
                            </div>
                          </div>
                        </div>
        
                        <div class="col-md-6" style="vertical-align:middle;" align="right">
                          <div class="input-group" style="width:100%">
                            <span class="input-group-addon">Insumo: </span>
                            <input  class="form-control" type="text" id="nombre" name="nombre" ng-model="itemRecetaExterna.item" list="insumos" required mayusculas>
                          </div><br>
                          <div class="input-group">
                            <span class="input-group-addon">Indicaciones: </span>
                            <textarea class="form-control" ng-model="itemRecetaExterna.indicacion" rows="2" id="indicacion" name="indicacion" required mayusculas></textarea>
                          </div>
                          <br>
                          <div class="input-group">
                            <span class="input-group-addon">Presentación:</span>
                            <input  class="form-control" type="text" id="presentacion" name="presentacion" ng-model="itemRecetaExterna.presentacion" style="text-transform: uppercase;" required >
                          </div>
                          <br>
                          <button type="submit" class="btn btn-success  btn-block" ng-disabled="formularios.recetaExterna.$invalid || trabajando" ng-if="formularios.recetaExterna.$valid && !trabajando">
                            <i class="fa fa-plus-circle" aria-hidden="true"></i>
                            Agregar
                          </button>
        
                          <button type="button" class="btn btn-warning btn-block f-content" ng-disabled="formularios.recetaExterna.$invalid" ng-if="formularios.recetaExterna.$invalid && !trabajando">
                            <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                            Verifica los datos
                          </button>
        
                          <button type="button" class="btn btn-info btn-block" disabled ng-if="trabajando">
                            <i class="fa fa-cog fa-spin"></i>
                            Por favor espere 
                          </button>
                        </div>
                      </div>

                      <!--<div class="row" >
                        <div class="col-md-4" style="vertical-align:middle;" align="right">
                        </div>

                        <div class="col-md-2">
                          <button type="submit" class="btn btn-success  btn-block" ng-disabled="formularios.recetaExterna.$invalid || trabajando" ng-if="formularios.recetaExterna.$valid && !trabajando">
                            <i class="fa fa-plus-circle" aria-hidden="true"></i>
                            Agregar
                          </button>
        
                          <button type="button" class="btn btn-warning btn-block f-content" ng-disabled="formularios.recetaExterna.$invalid" ng-if="formularios.recetaExterna.$invalid && !trabajando">
                            <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                            Verifica los datos
                          </button>
        
                          <button type="button" class="btn btn-info btn-block" disabled ng-if="trabajando">
                            <i class="fa fa-cog fa-spin"></i>
                            Por favor espere 
                          </button>
                        </div> 
                      </div>-->

                      <br><br>
        
                      <div class="row" ></div>
                    </div>
                  </form>
                </div>
                <!-- TERMINA RECETA EXTERNA -->
          
                <!-- PESTAÑA INDICACIONES -->
                <div role="tabpanel" class="tab-pane" id="indicaciones">
                  <form name="formularios.indica" ng-submit="guardaIndicaciones()" novalidate>
                    <div class="row">
                      <div class="col-md-5">
                        <div class="input-group" style="width:100%">
                          <span class="input-group-addon">Indicaciones Generales: </span>
                          <select class="form-control" ng-model="indicacion.indicacion" style="width:100%;" name="tipoSumin" id="tipoSumin" ng-options="indicacion.Ind_nombre as indicacion.Ind_nombre for indicacion in listaIndicacion" ng-change="verIndicacionCam()">
                            <option value="" > - Seleccione - </option>             
                          </select>
                        </div>
                      </div>
        
                      <div class="col-md-5">     
                        <div class="input-group" style="width:100%">            
                          <textarea class="form-control" ng-model="indicacion.obs" rows="3" id="obs" name="obs" style="resize:none;" required></textarea>
                        </div>
                        <div class="validacion" ng-show="msjPalabraProhiInd">
                          <div >Está utilzando una palabra prohibida <b>(INCAPACIDAD)</b></div>            
                        </div>  
                      </div>

                      <div class="col-md-2">
                        <button type="submit" class="btn btn-success btn-block" ng-disabled="formularios.indica.$invalid || trabajando" ng-if="formularios.indica.$valid && !trabajando">
                          <i class="fa fa-plus-circle" aria-hidden="true"></i>
                          Agregar
                        </button>
        
                        <button type="button" class="btn btn-warning btn-block f-content" ng-disabled="formularios.indica.$invalid" ng-if="formularios.indica.$invalid && !trabajando">
                          <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                          Verifica los datos
                        </button>
        
                        <button type="button" class="btn btn-info btn-block" disabled ng-if="trabajando">
                          <i class="fa fa-cog fa-spin"></i>
                          Por favor espere 
                        </button>
                      </div>       
                    </div>
                  </form> 
                </div>
          
                <div class="row">
                  <div class="col-md-12">
                    <div ng-show="listadoRecetaExterna.length>0 || listaIndicAgreg.length>0" class="mianimacion">
                      <table id="tablaItems" width="100%" class="table table-striped table-hover">
                        <tr>
                          <th class="info" colspan="6" style="text-align: center; font-size: 1.3em;">
                            RECETA EXTERNA
                          </th>
                        </tr>
                        <tr>        
                          <th >#</th>          
                          <th width="20%"><b>Insumo<b/></th>             
                          <th width="20%"><b>Presentación<b/></th>
                          <th width="50%"><b>Indicaciones<b/></th>
                          <th width="10%"><b>Eliminar</b></th>
                        </tr>
        
                        <tr ng-repeat="item in listadoRecetaExterna">
                          <td>{{ $index+1 }}</td>
                          <td>{{ item.REI_nombreItem }}</td>
                          <td>{{ item.REI_presentacion }}</td>                
                          <td>{{ item.REI_indicaciones }}</td>
                          <td>
                            <button type='button' class="btn btn-danger btn-xs btn-block" ng-click='eliminaItemExterno(item.REI_id)' ng-disabled="trabajando">
                              <span ng-if="!trabajando">Eliminar</span>
                              <span ng-if="trabajando"><i class="fa fa-cog fa-spin"></i></span>
                            </button>
                          </td>
                        </tr>
        
                        <tr ng-repeat="indicacion in listaIndicAgreg">
                          <!-- <td>{{ $index+1 }}</td> -->
                          <td colspan="3">{{ indicacion.Nind_obs }}</td>
                          <td>
                            <button type='button' class="btn btn-danger btn-xs btn-block" 
                                    ng-click='eliminarIndicacion(indicacion.Nind_clave)'
                                    ng-disabled="trabajando">
                              <span ng-if="!trabajando">Eliminar</span>
                              <span ng-if="trabajando"><i class="fa fa-cog fa-spin"></i></span>
                            </button>
                          </td>
                        </tr>
                      </table>
                    </div>
                  </div>
                </div>
                <!-- TERMINA PESTAÑA INDICACIONES -->
          
                <script type="text/javascript">
                  jQuery(document).ready(function ($) {
                      $('#tabs').tab();
                  });
                </script>
          
              </div>
            </div>
          </div>

          <div class="row" >
            <div class="col-md-4 col-md-offset-4">
              <button type="button" class="btn btn-success btn-lg btn-block" 
                      ng-if="(listaIndicAgreg.length>=1 || listadoRecetaExterna.length>=1) && !trabajando" 
                      ng-disabled="trabajando" ng-click="imprimirRecetaExterna()">
                <i class="fa fa-print" aria-hidden="true"></i>
                Guardar receta
              </button>
          
              <button type="button" class="btn btn-warning btn-lg btn-block" disabled ng-if="listaIndicAgreg.length<1 && listadoRecetaExterna==null">
                <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                Receta vacia
              </button>
          
              <button type="button" class="btn btn-info btn-lg btn-block" disabled ng-if="trabajando">
                <i class="fa fa-cog fa-spin"></i>
                Por favor espere 
              </button>
            </div>
          </div>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="modalCuentaPx" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Transferencia a paciente</h4>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="col-md-12">
              <div>
                <!-- PESTAÑA RECETA EXTERNA -->
                <div role="tabpanel" class="tab-pane" id="cuentaPx">
                  <br>
                  <div class="alert alert-warning" role="alert" style="font-size: 1.1em; width: 80%; margin:auto;" align="center">
                    <i class="fa fa-info-circle" aria-hidden="true"></i>
                    Estos datos se usarán para hacer una transferencia al paciente para la compra de sus medicamentos.
                  </div>
          
                  <br><br>
          
                  <form name="formularios.cuentaPx" ng-submit="guardaCuenta()" novalidate> 
                    <div>         
                      <div class="row" >        
                        <div class="col-md-12" style="vertical-align:middle;" align="right">
                          <div class="input-group" style="width:100%">
                            <span class="input-group-addon">Clabe interbancaria: </span>
                            <input class="form-control" ng-model="cuentaPx.clabe" type="number" name="clabe" placeholder="Clabe interbancaria" value="{{listClabe.Cuenta_clabe}}" minlength="18" maxlength="18">
                          </div><br>
                          <div class="input-group" style="width:100%">
                            <span class="input-group-addon">Número de tarjeta: </span>
                            <input class="form-control" ng-model="cuentaPx.tarjeta" type="number" name="tarjeta" placeholder="Número de tarjeta" value="{{listClabe.Cuenta_tarjeta}}" minlength="13" maxlength="20">
                          </div>
                          <br>
                          <div class="input-group">
                            <span class="input-group-addon">Banco:</span>
                            <input  class="form-control" type="text" id="banco" name="banco" ng-model="cuentaPx.banco" mayusculas value="{{listClabe.Cuenta_banco}}" required>
                          </div>
                          <br>
                          <div class="input-group">
                            <span class="input-group-addon">Beneficiario: </span>
                            <input type="text" name="beneficiario" class="form-control" ng-model="cuentaPx.beneficiario" id="beneficiario" value="{{listClabe.Cuenta_beneficiario}}" placeholder="" required mayusculas>
                          </div>
                          <br>
                          <div style="float: left;">
                            <label class="radio-inline c-radio">
                            <input  id="monto" ng-model="cuentaPx.monto" type="radio" name="monto" value="100" required>
                            <span class="fa fa-check"></span>Medicamentos</label><label class="radio-inline c-radio">
                            <input  id="monto" ng-model="cuentaPx.monto" type="radio" name="monto" value="150" required>
                            <span class="fa fa-check"></span>Medicamentos + órtesis</label>
                          </div>
                          <br>
                          <button type="submit" class="btn btn-success" ng-disabled="formularios.cuentaPx.$invalid || trabajando" ng-if="formularios.cuentaPx.$valid && !trabajando">
                            Guardar
                          </button>
        
                          <button type="button" class="btn btn-warning btn-block f-content" ng-disabled="formularios.cuentaPx.$invalid" ng-if="formularios.cuentaPx.$invalid && !trabajando">
                            <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                            Verifica los datos
                          </button>
        
                          <button type="button" class="btn btn-info btn-block" disabled ng-if="trabajando">
                            <i class="fa fa-cog fa-spin"></i>
                            Por favor espere 
                          </button>
                        </div>
                      </div>
                      <br><br>
        
                      <div class="row" ></div>
                      <div class="validacion" ng-show="msjCuenta">
                        <span>La cuenta se guardó correctamente y se envió al paciente</span>
                      </div>
                      <div class="validacion" ng-show="msjClabe">
                        <span>Es necesario indicar la clabe interbancaria o número de tarjeta</span>
                      </div>
                    </div>
                  </form>
                </div>          
              </div>
            </div>
          </div>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="modalhistoria2" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Notas de historia clínica</h4>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-md-12">
            <div>
              <!-- PESTAÑA RECETA EXTERNA -->
              <div role="tabpanel" class="tab-pane" id="hcRapida2">
        
                <form name="formularios.historiaRapida2" ng-submit="guardaHistoriaRapida2()" novalidate> 
                  <div>         
                    <div class="row" >        
                      <div class="col-md-12" style="vertical-align:middle;" align="right">
                        <div class="input-group" style="width:100%">
                          <span class="input-group-addon">Notas: </span>
                          <textarea class="form-control" ng-model="hcRapida2.notas2" name="notas2" placeholder="Ej. El paciente es alérgico a la aspirina y padece de gastritis." rows="6" mayusculas required></textarea> 
                        </div><br>
                        <div class="input-group" style="width:100%; text-align: justify">
                          <h4>Notas registradas: </h4>
                          <div>{{historia.Hist_notas}}</div>
                        </div><br>
                        <br>
                        <button type="submit" class="btn btn-success" ng-disabled="formularios.historiaRapida2.$invalid || trabajando" ng-if="formularios.historiaRapida2.$valid && !trabajando">
                          Guardar
                        </button>
      
                        <button type="button" class="btn btn-warning btn-block f-content" ng-disabled="formularios.historiaRapida2.$invalid" ng-if="formularios.historiaRapida2.$invalid && !trabajando">
                          <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                          No hay información
                        </button>
      
                        <button type="button" class="btn btn-info btn-block" disabled ng-if="trabajando">
                          <i class="fa fa-cog fa-spin"></i>
                          Por favor espere 
                        </button>
                      </div>
                    </div>
                    <br>
      
                    <div class="row" ></div>
                    <div class="validacion" ng-show="msjHc2">
                      <span>La información se guardó correctamente</span>
                    </div>
                  </div>
                </form>
              </div>          
            </div>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="modalcontactoAMI" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Contacto AMI</h4>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-md-12">
            <div>
              <!-- PESTAÑA RECETA EXTERNA -->
              <div role="tabpanel" class="tab-pane">
                <div>         
                  <div class="row" >        
                    <div class="col-md-12" style="vertical-align:middle;" align="right">
                      <div class="input-group" style="width:100%">
                        <span class="input-group-addon"><h4>Teléfono: 5584380015</h4></span>
                      </div><br>
                      <div class="input-group" style="width:100%">
                        <span class="input-group-addon"><h4>Correo: pruebas@atencionmedicainmediata.com</h4></span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>          
            </div>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>

<div ng-show="verResultado">
  <div class="row">
    <div class="col-md-12">
      <h3>Documentos requeridos por el paciente</h3>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12">
      Documentos
    </div>
    <div class="col-md-12">
      <ul>
        <li ng-repeat="lista in listadoDocsReq">
          {{lista.nombre}}
        </li>
      </ul>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12">
      Ejercicios en casa
    </div>
    <div class="col-md-12">
      <ul>
        <li ng-repeat="lista in listaEjercicios">
          {{lista.nombre}}
        </li>
      </ul>
    </div>
  </div>

  <form ng-submit="enviarDocumentos()" name="formEvioDocs" id="formEvioDocs">
    <div class="row">
      <div class="col-md-6">
        <label for="basic-url">-</label>
        <div class="input-group">
          <span class="input-group-addon" id="basic-addon3">Enviar por msj al telefono:</span>
          <input type="tel" ng-model="envio.telefonoElegido" class="form-control" id="basic-url" value="{{detalle.telefono}}" aria-describedby="basic-addon3">
        </div>
        <!-- <br>
        <button class="btn btn-primary btn-block" ng-click="enviarMensajeDocumentos()"> Enviar</button> -->
      </div>

      <div class="col-md-6">
        <label for="basic-url">Enviar al correo: {{detalle.mail}}</label>
        <div class="input-group">
          <span class="input-group-addon" id="basic-addon3">Con Copia a:</span>
          <input type="mail" class="form-control" ng-model="envio.correoElegido" id="basic-url" aria-describedby="basic-addon3">
        </div>
        <!-- <br>
        <button class="btn btn-primary btn-block" ng-click="enviarCorreoDocumentos(detalle.mail,correoEnviarOtro)"> Enviar</button>

        <div class="elert alert success" ng-show="msjcorreoEnviado">{{msjcorreoEnviado}}</div> -->
      </div>
    </div>

    <div ng-class="spinnerDiv">
      <div class="col-md-6 col-md-offset-3" align="center">
        <div class="row">
          <div class="col-md-4">
            <!-- <span class="fa-stack fa-lg">
              <em class="fa fa-circle fa-stack-2x text-primary"></em>
              <em class="fa fa-envelope-o fa-stack-1x fa-inverse text-white"></em>
            </span> -->
            <div class="checkbox c-checkbox">
            <label>
            <input ng-model="envio.correo"  type="checkbox" value="1">
            <span class="fa fa-check"></span>Correo</label></div>
          </div>
          <div class="col-md-4">
            <!-- <span class="fa-stack fa-lg">
              <em class="fa fa-circle fa-stack-2x text-primary"></em>
              <em class="fa fa-comment  fa-stack-1x fa-inverse text-white"></em>
            </span> -->
            <div class="checkbox c-checkbox">
            <label>
            <input ng-model="envio.msm"  type="checkbox" value="1">
            <span class="fa fa-check"></span>SMS</label></div>
          </div>

          <div class="col-md-4">

            <!-- <span class="fa-stack fa-lg">
              <em class="fa fa-circle fa-stack-2x text-primary"></em>
              <em class="fa fa-whatsapp fa-stack-1x fa-inverse text-white"></em>
            </span> -->
            <div class="checkbox c-checkbox">
            <label>
            <input ng-model="envio.whatapp" type="checkbox" value="1">
            <span class="fa fa-check"></span>Whatsapp</label></div>
          </div>
        </div>
      </div>
    </div>
  </form> 

  <div class="row">    
    <div class="col-md-4 col-md-offset-2" align="center">
        <button name="botonEnvioDoc" id="botonEnvioDoc" form="formEvioDocs" class="btn btn-primary btn-block" ng-disabled="!envio.whatapp && !envio.correo && !envio.msm" type="submit">Enviar documentos</button>
    </div>
    <div class="col-md-4" align="center">
      <button name="botonFinProceso" id="botonFinProceso" class="btn btn-primary btn-block" ng-disabled="terminar" ng-click="terminarAtencion()">Terminar atención</button>
    </div>
  </div>

  <div class="row" ng-show="msjEnvioDocs">
    <div class="col-md-12">
        <span class="alert alert-success">{{msjEnvioDocs}}</span>
    </div>
  </div>

  <div ng-class="spinner">
  </div>
  <div class="row" ng-show="mensajeFinalizado">
    <div class="col-md-12">
      <span class="alert alert-danger">La Atención finalizó correctamente</span>
    </div>
  </div>
</div>